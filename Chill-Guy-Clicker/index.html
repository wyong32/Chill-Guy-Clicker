<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/images/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chill Guy Clicker - Relaxing Idle Game - Play Online Free</title>
    <meta
      name="description"
      content="Play Chill Guy Clicker, a relaxing and fun clicking game where you earn points by clicking characters. Unlock new abilities and characters as you progress!"
    />
    <meta name="keywords" content="chill guy clicker, idle game, clicker game, relaxing game, online game, free game" />

    <!-- 预加载关键资源 -->
    <link
      rel="preload"
      href="/images/logo.png"
      as="image"
      type="image/png"
      fetchpriority="high"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- DNS 预解析 -->
    <link rel="dns-prefetch" href="//fonts.gstatic.com" />
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="dns-prefetch" href="//www.googletagmanager.com" />
    <link rel="dns-prefetch" href="//www.google-analytics.com" />

    <!-- 移除开发环境中的预加载，避免警告 -->
    <!-- 预加载将在生产环境中通过 Vite 自动处理 -->

    <!-- 权限策略 -->
    <meta http-equiv="Permissions-Policy" content="autoplay=*, fullscreen=*, cross-origin-isolated=*" />

    <!-- 默认社交媒体标签 - 会被路由守卫动态更新 -->
    <!-- Open Graph 标签 (Facebook, 微信等) -->
    <meta property="og:title" content="Chill Guy Games - Play Free Online Games" />
    <meta property="og:description" content="chill guy clicker, idle game, clicker game, relaxing game, online game, free game" />
    <meta property="og:image" content="https://chillguymemeclicker.com/images/logo.png" />
    <meta property="og:url" content="https://chillguymemeclicker.com" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Chill Guy Games" />

    <!-- Twitter Card 标签 -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Chill Guy Games - Play Free Online Games" />
    <meta name="twitter:description" content="chill guy clicker, idle game, clicker game, relaxing game, online game, free game" />
    <meta name="twitter:image" content="https://chillguymemeclicker.com/images/logo.png" />

    <!-- 规范URL -->
    <link rel="canonical" href="https://chillguymemeclicker.com" />

    <!-- 预加载关键资源 - 防止布局偏移 -->
    <link rel="preload" href="/images/logo.png" as="image" type="image/png" fetchpriority="high" />
    <link rel="preload" href="/images/games/game-01.webp" as="image" type="image/webp" fetchpriority="high" />

    <!-- DNS 预解析 -->
    <link rel="dns-prefetch" href="//www.googletagmanager.com" />

    <!-- CLS 优化 CSS -->
    <link rel="stylesheet" href="/css/cls-optimize.css" />

    <!-- 关键 CSS 内联 - 完全基于 Cookingdom 最佳实践 -->
    <style>
      /* 关键渲染路径 CSS - 只包含首屏必需的样式 */
      * {
        padding: 0;
        margin: 0;
        box-sizing: border-box;
      }

      body {
        /* 完全复制 Cookingdom 的字体栈 - 零布局偏移 */
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segue UI', Roboto, Oxygen, Ubuntu, Cantarell,
          'Open Sans', 'Helvetica Neue', Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #fff;
        line-height: 1.6;
        min-height: 100vh;
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      .container {
        width: 100%;
        max-width: 1400px;
        margin-left: auto;
        margin-right: auto;
        padding-left: 1rem;
        padding-right: 1rem;
        /* 防止布局偏移 */
        contain: layout style;
        box-sizing: border-box;
      }

      /* 关键图片样式内联 - 完全基于 Cookingdom */
      .game-image-placeholder {
        width: 100%;
        height: 150px;
        background-color: #f0f0f0;
        position: relative;
        overflow: hidden;
        contain: layout paint;
        will-change: transform;
        transform: translateZ(0);
        backface-visibility: hidden;
      }

      .game-image-placeholder img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        transform: translateZ(0);
      }

      /* 游戏容器关键样式 */
      .game-container {
        background-color: rgba(255, 255, 255, 0.95);
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.3);
        color: #333;
        contain: layout style paint;
        min-height: 500px;
        width: 100%;
        box-sizing: border-box;
      }

      /* Header 固定高度，防止布局偏移 */
      .header-placeholder {
        min-height: 80px;
        contain: layout style paint;
        width: 100%;
        box-sizing: border-box;
      }

      /* Footer 固定高度，防止布局偏移 */
      .footer-placeholder {
        min-height: 300px;
        contain: layout style paint;
        width: 100%;
        box-sizing: border-box;
        margin-top: auto;
      }

      /* 加载指示器 */
      .loading-spinner {
        width: 40px;
        height: 40px;
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-radius: 50%;
        border-top-color: #41b883;
        animation: spin 1s ease-in-out infinite;
        margin: 2rem auto;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* 防止布局偏移的占位样式 - 基于 Cookingdom */
      #app {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        width: 100%;
        overflow-x: hidden;
      }

      /* 主内容区域 */
      .main-content {
        flex: 1;
        width: 100%;
        min-height: calc(100vh - 380px);
      }

      /* 游戏 iframe 容器 - 防止布局偏移 */
      .game-iframe-container {
        width: 100%;
        aspect-ratio: 16 / 9;
        background-color: #f0f0f0;
        border-radius: 10px;
        overflow: hidden;
        position: relative;
        contain: layout paint;
        transform: translateZ(0);
      }

      .game-iframe-container iframe {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
      }

      /* 移动端优化 - 基于 Cookingdom */
      @media (max-width: 767px) {
        .game-container {
          padding: 15px;
          min-height: 400px;
        }

        .game-iframe-container {
          aspect-ratio: 4 / 3; /* 移动端使用更适合的比例 */
        }

        .game-image-placeholder {
          height: 120px;
          /* 防止移动端布局偏移 */
          aspect-ratio: 300 / 120;
        }

        .header-placeholder {
          min-height: 60px;
        }

        .footer-placeholder {
          min-height: 250px;
        }

        .main-content {
          min-height: calc(100vh - 310px);
        }
      }
    </style>

    <!-- Delayed Google Analytics Loading -->
    <script>
      // Delay GTM loading to reduce initial load time
      window.addEventListener('load', function () {
        setTimeout(function () {
          // Google tag (gtag.js)
          var script = document.createElement('script')
          script.async = true
          script.src = 'https://www.googletagmanager.com/gtag/js?id=G-NM6JN6XG6J'
          document.head.appendChild(script)

          window.dataLayer = window.dataLayer || []
          function gtag() {
            dataLayer.push(arguments)
          }
          gtag('js', new Date())
          gtag('config', 'G-NM6JN6XG6J')

          console.log('Google Analytics loaded with delay')
        }, 2000) // Delay 2 seconds after page load
      })
    </script>
  </head>
  <body>
    <div id="app">
      <!-- Initial loading indicator -->
      <div class="loading-spinner"></div>
    </div>

    <!-- CLS 优化脚本 - 在主应用加载前运行 -->
    <script src="/scripts/cls-optimize.js"></script>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
